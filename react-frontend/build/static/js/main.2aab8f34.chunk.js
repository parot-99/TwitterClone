(this["webpackJsonpreact-frontend"]=this["webpackJsonpreact-frontend"]||[]).push([[0],{18:function(e,t,a){e.exports=a(37)},23:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),l=(a(23),a(1)),s=a(2),i=a(3),m=r.a.createContext({isAuthenticated:!1,setIsAuthenticated:function(){}}),u=a(10),d=function(e){var t=e.children,a=Object(u.a)(e,["children"]);return r.a.createElement(i.b,Object.assign({},a,{render:function(e){var a=e.location;return localStorage.getItem("accessToken")?t:r.a.createElement(i.a,{to:{pathname:"/auth/login",state:{from:a}}})}}))},p=(a(29),a(30),a(31),function(){var e=Object(n.useContext)(m).setIsAuthenticated,t=Object(i.g)();return r.a.createElement("h3",{onClick:function(){return function(){var a={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token  ".concat(localStorage.getItem("accessToken"))}};fetch("/api/auth/logout/",a).then((function(a){204===a.status&&(localStorage.removeItem("accessToken"),e(!1),t.push("/"))})).catch((function(e){return alert(e)}))}()},className:"nav-btn cursor clicked"},"Logout")}),f=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useContext)(m).isAuthenticated,i=Object(n.useState)(!1),u=Object(l.a)(i,2),d=u[0],f=u[1];return Object(n.useEffect)((function(){if(f(o),d){var e={method:"GET",headers:{accepts:"application/json",Authorization:"Token ".concat(localStorage.getItem("accessToken"))}};fetch("/api/profiles/current/user/",e).then((function(e){if(200===e.status)return e.json();throw new Error(e.statusText)})).then((function(e){c(e.username)})).catch((function(e){return console.log(e)}))}}),[o,d]),r.a.createElement("header",{id:"main-header"},r.a.createElement("div",{className:"container flexed"},r.a.createElement(s.b,{to:"/"},r.a.createElement("h1",null,"TwitterClone")),r.a.createElement("nav",{className:"nav-bar flexed"},o&&r.a.createElement(s.c,{to:"/home",activeClassName:"active"},r.a.createElement("h3",{className:"nav-btn"},"Home")),o&&r.a.createElement(s.c,{to:"/profiles/".concat(a),activeClassName:"active"},r.a.createElement("h3",{className:"nav-btn"},"Profile")),o&&r.a.createElement(s.c,{to:"/profiles/search",activeClassName:"active"},r.a.createElement("h3",{className:"nav-btn"},"Search")),!o&&r.a.createElement(s.c,{to:"/auth/login",activeClassName:"active"},r.a.createElement("h3",{className:"nav-btn"},"Login")),!o&&r.a.createElement(s.c,{to:"/auth/register",activeClassName:"active"},r.a.createElement("h3",{className:"nav-btn"},"Register")),o&&r.a.createElement(p,null))))},h=(a(32),function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],o=a[1];return r.a.createElement("form",{onSubmit:function(t){return function(t){t.preventDefault();var a={content:c},n={method:"POST",headers:{Authorization:"Token ".concat(localStorage.getItem("accessToken")),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a)};fetch("/api/tweets/create/",n).then((function(t){if(201===t.status)return e.onTweetAdd(),t.json();if(400===t.status)throw new Error("Try a shorter tweet");throw 401===t.status?new Error("Login first to perform this action"):new Error("Something wrong happend!")})).then((function(){o("")})).catch((function(e){console.log(e)}))}(t)},action:"",method:"POST",id:"tweet-create-form",className:"form-container"},r.a.createElement("div",{className:"form-item"},r.a.createElement("textarea",{name:"content",id:"id_content",cols:"50",rows:"7",placeholder:"Your tweet...",required:!0,value:c,onChange:function(e){return o(e.target.value)},autoComplete:"off"})),r.a.createElement("div",{className:"form-item"},r.a.createElement("button",{type:"submit",className:"prim-btn cursor"},"Tweet")))}),E=function(e){var t=Object(n.useState)(e.tweetLikes),a=Object(l.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)(e.isLiked),i=Object(l.a)(s,2),m=i[0],u=i[1];return r.a.createElement("button",{onClick:function(){return function(e){var t="/api/tweets/".concat(e,"/like/"),a={method:"POST",headers:{Authorization:"Token ".concat(localStorage.getItem("accessToken")),"Content-Type":"application/json",Accept:"application/json"}};fetch(t,a).then((function(e){if(200===e.status)return e.json();throw new Error})).then((function(e){"like"===e.type?o(c+1):o(c-1),"like"===e.type?u(!0):u(!1)})).catch((function(e){alert(e)}))}(e.tweetId)},className:"prim-btn tweet-container-item cursor"},!m&&c+" likes",m&&c+" liked")},g=function(e){return r.a.createElement(s.b,{to:{pathname:"/home/retweet",state:{tweet:e.tweet}}},r.a.createElement("button",{className:"prim-btn tweet-container-item cursor"},"retweet"))},b=function(e){return r.a.createElement("article",{key:e.tweet.id,className:"retweet-container"},r.a.createElement("header",{className:"tweet-header"},r.a.createElement("div",{id:"tweet-profile-pic"},r.a.createElement("img",{src:"".concat(e.tweet.profile_pic),alt:""})),r.a.createElement(s.b,{to:"/profiles/".concat(e.tweet.username)},r.a.createElement("h3",{className:"tweet-container-item"},e.tweet.username))),r.a.createElement("p",{className:"tweet-container-item"},e.tweet.content))},w=function(e){return r.a.createElement("article",{key:e.tweet.id,className:"tweet-container"},r.a.createElement("header",{className:"tweet-header"},r.a.createElement("div",{id:"tweet-profile-pic"},r.a.createElement("img",{src:"".concat(e.tweet.profile_pic),alt:""})),r.a.createElement(s.b,{to:"/profiles/".concat(e.tweet.username)},r.a.createElement("h3",{className:"tweet-container-item"},e.tweet.username))),r.a.createElement("p",{className:"tweet-container-item"},e.tweet.content),e.tweet.is_retweet&&r.a.createElement(b,{tweet:e.tweet.retweet}),r.a.createElement(E,{tweetId:e.tweet.id,tweetLikes:e.tweet.likes,isLiked:e.tweet.isLiked}),r.a.createElement(g,{tweet:e.tweet,onTweetAdd:e.onTweetAdd}))},v=function(){var e=Object(i.h)(),t=Object(i.g)(),a=Object(n.useState)(""),c=Object(l.a)(a,2),o=c[0],s=c[1];return r.a.createElement(n.Fragment,null,r.a.createElement("form",{onSubmit:function(a){return function(a){a.preventDefault();var n="/api/tweets/".concat(e.state.tweet.id,"/retweet/"),r={method:"POST",headers:{Authorization:"Token ".concat(localStorage.getItem("accessToken")),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({content:o})};fetch(n,r).then((function(e){if(201!==e.status)throw new Error("Something wrong happend!");t.push("/home")})).catch((function(e){return console.log(e)}))}(a)},method:"POST",id:"tweet-create-form",className:"form-container"},r.a.createElement("div",{className:"form-item"},r.a.createElement("textarea",{name:"content",id:"id_content",cols:"50",rows:"7",placeholder:"Add a comment",required:!0,value:o,onChange:function(e){return s(e.target.value)},autoComplete:"off"})),r.a.createElement("div",{className:"form-item"},r.a.createElement("button",{type:"submit",className:"prim-btn cursor"},"Retweet"))),r.a.createElement(b,{tweet:e.state.tweet}))},j=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),s=Object(l.a)(o,2),m=s[0],u=s[1],d=Object(n.useState)(!1),p=Object(l.a)(d,2),f=p[0],E=p[1],g=Object(n.useState)(!1),b=Object(l.a)(g,2),j=b[0],O=b[1];Object(n.useEffect)((function(){var e={method:"GET",headers:{Authorization:"Token  ".concat(localStorage.getItem("accessToken")),Accept:"application/json"}};fetch("/api/tweets/",e).then((function(e){if(200===e.status)return e.json();throw new Error(e.statusText)})).then((function(e){E(!0),c(e)})).catch((function(e){E(!0),u(!0),console.log(e)}))}),[j]);var N=function(){O(!j)};return r.a.createElement("main",{id:"page-container"},r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/home"},r.a.createElement(h,{onTweetAdd:N}),!f&&r.a.createElement("div",{className:"loader"}),m&&r.a.createElement("h1",{className:"message"},"Error"),!m&&r.a.createElement("section",{id:"tweets-container"},a.map((function(e){return r.a.createElement(w,{key:e.id,tweet:e,onTweetAdd:N})})))),r.a.createElement(i.b,{exact:!0,path:"/home/retweet"},r.a.createElement(v,null)),r.a.createElement(i.b,null,r.a.createElement("h1",{className:"centered"},"Not Found"))))},O=(a(33),function(){var e=Object(n.useContext)(m).setIsAuthenticated,t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)(""),u=Object(l.a)(s,2),d=u[0],p=u[1],f=Object(i.g)(),h=function(t){t.preventDefault();var a={username:c,password:d},n={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a)};fetch("/api/auth/login/",n).then((function(e){if(o(""),p(""),200===e.status)return e.json();throw new Error("Try again")})).then((function(t){localStorage.setItem("accessToken",t.token),e(!0),f.push("/home")})).catch((function(e){return alert(e)}))};return r.a.createElement("form",{onSubmit:function(e){return h(e)},action:"",method:"POST",className:"form-container"},r.a.createElement("div",{className:"form-item"},r.a.createElement("h1",{className:"main-color"},"Log In")),r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"id_username"},"Username"),r.a.createElement("input",{type:"text",name:"username",id:"id_username",value:c,onChange:function(e){return o(e.target.value)},required:!0,autoComplete:"off"})),r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"id_password"},"Password"),r.a.createElement("input",{type:"password",name:"password",id:"id_password",value:d,onChange:function(e){return p(e.target.value)},required:!0})),r.a.createElement("div",{className:"form-item"},r.a.createElement("input",{type:"submit",value:"Log In",className:"prim-btn cursor"})))}),N=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),m=Object(l.a)(o,2),u=m[0],d=m[1],p=Object(n.useState)(""),f=Object(l.a)(p,2),h=f[0],E=f[1],g=Object(n.useState)(""),b=Object(l.a)(g,2),w=b[0],v=b[1],j=Object(n.useState)(""),O=Object(l.a)(j,2),N=O[0],S=O[1],T=Object(i.g)(),y=function(e){e.preventDefault();var t={username:a,name:u,password:h,password2:w,email:N},n={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)};fetch("/api/auth/register/",n).then((function(e){if(c(""),d(""),E(""),v(""),S(""),201!==e.status)return e.json();T.push("/auth/login")})).then((function(e){if(e)throw new Error(e[Object.keys(e)[0]])})).catch((function(e){return console.log(e)}))};return r.a.createElement(n.Fragment,null,r.a.createElement("form",{onSubmit:function(e){return y(e)},method:"POST",className:"form-container"},r.a.createElement("div",{className:"form-item"},r.a.createElement("h1",{className:"main-color"},"Register")),r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"id_username"},"Username"),r.a.createElement("input",{type:"text",name:"username",id:"id_username",value:a,onChange:function(e){return c(e.target.value)},autoComplete:"off"})),r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"id_name"},"Name"),r.a.createElement("input",{type:"text",name:"name",id:"id_name",value:u,onChange:function(e){return d(e.target.value)},autoComplete:"off"})),r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"id_password"},"Password"),r.a.createElement("input",{type:"password",name:"password",id:"id_password",value:h,onChange:function(e){return E(e.target.value)}})),r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"id_password2"},"Confirm Password"),r.a.createElement("input",{type:"password",name:"password2",id:"id_password2",value:w,onChange:function(e){return v(e.target.value)}})),r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"id_email"},"Email"),r.a.createElement("input",{type:"email",name:"email",id:"id_email",value:N,onChange:function(e){return S(e.target.value)},autoComplete:"off"})),r.a.createElement("div",{className:"form-item"},r.a.createElement("input",{type:"submit",value:"Register",className:"prim-btn cursor text-color"}))),r.a.createElement("div",{className:"centered"},r.a.createElement("p",null,"Already a user? ",r.a.createElement(s.b,{to:"/auth/login",className:"main-color"},"Login"))))},S=function(e){var t=e.children,a=Object(u.a)(e,["children"]);return r.a.createElement(i.b,Object.assign({},a,{render:function(e){var a=e.location;return localStorage.getItem("accessToken")?r.a.createElement(i.a,{to:{pathname:"/home",state:{from:a}}}):t}}))},T=function(){return r.a.createElement("main",{id:"page-container"},r.a.createElement(i.d,null,r.a.createElement(S,{exact:!0,path:"/auth/login"},r.a.createElement(O,null)),r.a.createElement(S,{exact:!0,path:"/auth/register"},r.a.createElement(N,null)),r.a.createElement(i.b,null,r.a.createElement("h1",{className:"centered"},"Not Found"))))},y=function(){return r.a.createElement("main",{id:"welcome"},r.a.createElement("div",{id:"join-us"},r.a.createElement(s.b,{to:"/auth/register"},r.a.createElement("h1",null,"Join Us"))))},k=(a(34),function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),c=a[0],o=a[1];Object(n.useEffect)((function(){o(e.isFollowed)}),[e.isFollowed]);var s=function(){var t="/api/profiles/".concat(e.username,"/follow/"),a={method:"POST",headers:{Authorization:"Token ".concat(localStorage.getItem("accessToken")),"Content-Type":"application/json",Accept:"application/json"}};fetch(t,a).then((function(e){if(200===e.status)return e.json();throw new Error})).then((function(e){"followed"===e.message&&o(!0),"unfollowed"===e.message&&o(!1)})).catch((function(e){return console.log(e)}))};return r.a.createElement(n.Fragment,null,c&&r.a.createElement("h3",{onClick:s,className:"prim-btn-2 cursor"},"Unfollow"),!c&&r.a.createElement("h3",{onClick:s,className:"prim-btn-2 cursor"},"Follow"))}),C=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)({}),m=Object(l.a)(o,2),u=m[0],d=m[1],p=Object(n.useState)({}),f=Object(l.a)(p,2),h=f[0],E=f[1],g=Object(n.useState)([]),b=Object(l.a)(g,2),v=b[0],j=b[1],O=Object(n.useState)(!1),N=Object(l.a)(O,2),S=N[0],T=N[1],y=Object(n.useState)(!1),C=Object(l.a)(y,2),_=C[0],A=C[1],x=Object(i.i)().username;return Object(n.useEffect)((function(){var e="/api/profiles/".concat(x,"/"),t={method:"GET",headers:{Authorization:"Token ".concat(localStorage.getItem("accessToken")),Accept:"application/json"}};fetch(e,t).then((function(e){if(200===e.status)return e.json();if(404===e.status)throw c(!1),new Error("User not found")})).then((function(e){A(!0),c(!0),T(!1),d(e.user_data),E(e.profile_data),j(e.tweets_data)})).catch((function(e){A(!0),T(!0),console.log(e)}))}),[x]),r.a.createElement(n.Fragment,null,!_&&r.a.createElement("div",{className:"loader"}),_&&!a&&r.a.createElement("h1",{className:"centered"},"User Not Found"),S&&a&&r.a.createElement("h1",{className:"message"},"Something wrog happend!"),!S&&_&&r.a.createElement(n.Fragment,null,r.a.createElement("section",{id:"profile-info"},r.a.createElement("header",{id:"profile-header",className:"flexed"},r.a.createElement("div",{id:"profile-pic"},r.a.createElement("img",{src:"".concat(h.profile_pic),alt:""})),r.a.createElement("h1",null,h.tweets_count," Tweets"),u.is_current_user&&r.a.createElement(s.b,{to:"/settings"},r.a.createElement("h3",{className:"prim-btn-2"},"Edit Profile")),!u.is_current_user&&r.a.createElement(k,{isFollowed:u.is_followed,username:u.username})),r.a.createElement("h1",{className:"bolder"},h.name),r.a.createElement("p",{className:"light-text-color"},"@",u.username),r.a.createElement("p",null,h.bio),r.a.createElement("p",{className:"light-text-color "},"Joined ",u.date_joined),h.birthday&&r.a.createElement("p",{className:"light-text-color "},"Born ",h.birthday),r.a.createElement("p",{className:"light-text-color"},r.a.createElement("span",{className:"bolder"}," ",h.following_count," ")," Following",r.a.createElement("span",{className:"bold"}," ",h.followers_count," "),"Followers")),r.a.createElement("section",{id:"tweets-container"},v.map((function(e){return r.a.createElement(w,{key:e.id,tweet:e})})))))},_=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),i=Object(l.a)(o,2),m=i[0],u=i[1];return Object(n.useEffect)((function(){var e={method:"POST",headers:{Authorization:"Token  ".concat(localStorage.getItem("accessToken")),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({username:m})};fetch("/api/profiles/",e).then((function(e){if(200===e.status)return e.json();throw new Error})).then((function(e){c(e||[])})).catch((function(e){return console.log(e)}))}),[m]),r.a.createElement(n.Fragment,null,r.a.createElement("header",{className:"form-container"},r.a.createElement("div",{className:"form-item"},r.a.createElement("h1",{className:"main-color"},"Search Users")),r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"id_username"},"Username"),r.a.createElement("input",{type:"text",name:"username",id:"id_username",required:!0,autoComplete:"off",onChange:function(e){u(e.target.value)}})),r.a.createElement("div",null)),r.a.createElement("section",{id:"settings-list"},a.map((function(e){return r.a.createElement(s.b,{key:e.id,to:"/profiles/".concat(e.username)},r.a.createElement("h2",null,e.username))}))))},A=function(){return r.a.createElement("main",{id:"page-container"},r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/profiles/search"},r.a.createElement(_,null)),r.a.createElement(i.b,{exact:!0,path:"/profiles/:username"},r.a.createElement(C,null)),r.a.createElement(i.b,null,r.a.createElement("h1",{className:"centered"},"Not Found"))))},x=(a(35),function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),s=Object(l.a)(o,2),i=s[0],m=s[1],u=Object(n.useState)(""),d=Object(l.a)(u,2),p=d[0],f=d[1],h=Object(n.useState)(null),E=Object(l.a)(h,2),g=E[0],b=E[1];Object(n.useEffect)((function(){var e={method:"GET",headers:{Authorization:"Token ".concat(localStorage.getItem("accessToken")),Accept:"application/json"}};fetch("/api/settings/update/profile/",e).then((function(e){if(200===e.status)return e.json();throw new Error})).then((function(e){c(e.bio||""),m(e.birthday||""),f(e.name)})).catch((function(e){console.log(e)}))}),[]);return r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault();var t=new FormData;t.append("bio",a),t.append("birthday",i),t.append("name",p),g&&t.append("profile_pic",g,g.name);var n={method:"PUT",headers:{Authorization:"Token ".concat(localStorage.getItem("accessToken"))},body:t};fetch("/api/settings/update/profile/",n).then((function(e){if(200!==e.status)throw new Error;alert("updated")})).catch((function(e){console.log(e)}))}(e)},action:"POST",className:"form-container",encType:"multipart/form-data"},r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"id_name"},"Name"),r.a.createElement("input",{type:"text",name:"name",id:"id_name",value:p,onChange:function(e){return f(e.target.value)},autoComplete:"off"})),r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"id_bio"},"Bio"),r.a.createElement("input",{type:"text",name:"bio",id:"id_bio",value:a,onChange:function(e){return c(e.target.value)},autoComplete:"off"})),r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:""},"Birthday"),r.a.createElement("input",{type:"date",name:"birthday",id:"id_birthday",value:i,onChange:function(e){return m(e.target.value)}})),r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"id_image"},"Profile Picture:"),r.a.createElement("div",{className:"fileUpload prim-btn-2"},r.a.createElement("span",null,"Upload"),r.a.createElement("input",{type:"file",name:"profile_pic",id:"id_profile_pic",className:"upload",accept:"image/*",onChange:function(e){return b(e.target.files[0])}}))),r.a.createElement("div",{className:"form-item"},r.a.createElement("input",{type:"submit",value:"Update",className:"prim-btn cursor text-color"})))}),P=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),s=Object(l.a)(o,2),i=s[0],m=s[1],u=Object(n.useState)(""),d=Object(l.a)(u,2),p=d[0],f=d[1],h=function(e){e.preventDefault();var t={old_password:a,new_password:i,new_password2:p},n={method:"POST",headers:{Authorization:"Token ".concat(localStorage.getItem("accessToken")),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)};fetch("/api/settings/update/password/",n).then((function(e){if(c(""),m(""),f(""),200===e.status)return e.json();if(401===e.status)return e.json();if(400===e.status)return e.json();throw new Error})).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))};return r.a.createElement("form",{onSubmit:function(e){return h(e)},action:"POST",className:"form-container"},r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"id_old_password"},"Old Password"),r.a.createElement("input",{type:"password",name:"old_password",id:"id_old_password",value:a,onChange:function(e){return c(e.target.value)},required:!0})),r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"id_old_password"},"New Password"),r.a.createElement("input",{type:"password",name:"new_password",id:"id_new_password",value:i,onChange:function(e){return m(e.target.value)},required:!0})),r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"id_old_password"},"Confirm New Password"),r.a.createElement("input",{type:"password",name:"new_password2",id:"id_new_password2",value:p,onChange:function(e){return f(e.target.value)},required:!0})),r.a.createElement("div",{className:"form-item"},r.a.createElement("input",{type:"submit",value:"Update",className:"prim-btn cursor text-color"})))},F=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),s=Object(l.a)(o,2),i=s[0],m=s[1],u=function(e){e.preventDefault();var t={password:a,email:i},n={method:"POST",headers:{Authorization:"Token ".concat(localStorage.getItem("accessToken")),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)};fetch("/api/settings/update/email/",n).then((function(e){if(c(""),m(""),[200,401,400].includes(e.status))return e.json();throw new Error})).then((function(e){e.message&&alert(e.message),e.success&&alert(e.success)})).catch((function(e){console.log(e)}))};return r.a.createElement("form",{onSubmit:function(e){return u(e)},action:"POST",className:"form-container"},r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"id_password"},"Confirm Password"),r.a.createElement("input",{type:"password",name:"password",id:"id_password",value:a,onChange:function(e){return c(e.target.value)},required:!0})),r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"id_email"},"New Email"),r.a.createElement("input",{type:"email",name:"email",id:"id_email",value:i,onChange:function(e){return m(e.target.value)},required:!0,autoComplete:"off"})),r.a.createElement("div",{className:"form-item"},r.a.createElement("input",{type:"submit",value:"Update",className:"prim-btn cursor text-color"})))},I=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useContext)(m).setIsAuthenticated,s=Object(i.g)();return r.a.createElement(n.Fragment,null,r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault();var t={method:"POST",headers:{Authorization:"Token ".concat(localStorage.getItem("accessToken")),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:a})};fetch("http://127.0.0.1:8000/api/auth/confirmpassword/",t).then((function(e){if(c(""),[200,401,400].includes(e.status))return e.json();throw new Error})).then((function(e){e.message&&alert(e.message),e.success&&(document.getElementById("confirm-delete").style.display="block")})).catch((function(e){return console.log(e)}))}(e)},action:"POST",className:"form-container"},r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"id_password"},"Confirm Password To Logout All Devices"),r.a.createElement("input",{type:"password",name:"password",id:"id_password",value:a,onChange:function(e){return c(e.target.value)},required:!0})),r.a.createElement("div",{className:"form-item"},r.a.createElement("input",{type:"submit",value:"Confirm",className:"prim-btn cursor text-color"}))),r.a.createElement("h2",{id:"confirm-delete",className:"centered cursor",onClick:function(e){return function(e){var t={method:"POST",headers:{Authorization:"Token ".concat(localStorage.getItem("accessToken")),Accept:"application/json","Content-Type":"application/json"}};fetch("/api/auth/logoutall/",t).then((function(e){if(204!==e.status)throw new Error;localStorage.removeItem("accessToken"),o(!1),s.push("/")})).catch((function(e){return console.log(e)}))}()}},"Logout All Devices"))},z=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useContext)(m).setIsAuthenticated,s=Object(i.g)();return r.a.createElement(n.Fragment,null,r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault();var t={method:"POST",headers:{Authorization:"Token ".concat(localStorage.getItem("accessToken")),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:a})};fetch("/api/auth/confirmpassword/",t).then((function(e){if(c(""),[200,401,400].includes(e.status))return e.json();throw new Error})).then((function(e){e.message&&alert(e.message),e.success&&(document.getElementById("confirm-delete").style.display="block")})).catch((function(e){return console.log(e)}))}(e)},action:"POST",className:"form-container"},r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"id_password"},"Confirm Password To Delete Account"),r.a.createElement("input",{type:"password",name:"password",id:"id_password",value:a,onChange:function(e){return c(e.target.value)},required:!0})),r.a.createElement("div",{className:"form-item"},r.a.createElement("input",{type:"submit",value:"Confirm",className:"prim-btn cursor text-color"}))),r.a.createElement("h2",{id:"confirm-delete",className:"centered cursor",onClick:function(e){return function(e){var t={method:"POST",headers:{Authorization:"Token ".concat(localStorage.getItem("accessToken")),Accept:"application/json","Content-Type":"application/json"}};fetch("/api/settings/delete/profile/",t).then((function(e){if(200!==e.status)throw new Error;localStorage.removeItem("accessToken"),o(!1),s.push("/")})).catch((function(e){return console.log(e)}))}()}},"Delete Account"))},D=(a(36),function(e){return r.a.createElement(s.b,{to:e.to},r.a.createElement("div",{id:"back"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M20 11H6.83l2.88-2.88c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0L3.71 11.3c-.39.39-.39 1.02 0 1.41L8.3 17.3c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L6.83 13H20c.55 0 1-.45 1-1s-.45-1-1-1z"}))))}),L=function(){return r.a.createElement("main",{id:"page-container",className:"container"},r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/settings"},r.a.createElement("header",{id:"settings-list"},r.a.createElement(s.b,{to:"/settings/profile"},r.a.createElement("h2",null,"Profile")),r.a.createElement(s.b,{to:"/settings/password"},r.a.createElement("h2",null,"Password")),r.a.createElement(s.b,{to:"/settings/email"},r.a.createElement("h2",null,"Email")),r.a.createElement(s.b,{to:"/settings/logoutall"},r.a.createElement("h2",null,"Logout All Devices")),r.a.createElement(s.b,{to:"/settings/delete/profile"},r.a.createElement("h2",null,"Delete Account")))),r.a.createElement(i.b,{exact:!0,path:"/settings/profile"},r.a.createElement("div",{className:"settings-header"},r.a.createElement(D,{to:"/settings"}),r.a.createElement("h1",null,"Update Profile")),r.a.createElement(x,null)),r.a.createElement(i.b,{exact:!0,path:"/settings/password"},r.a.createElement("div",{className:"settings-header"},r.a.createElement(D,{to:"/settings"}),r.a.createElement("h1",null,"Update Password")),r.a.createElement(P,null)),r.a.createElement(i.b,{exact:!0,path:"/settings/email"},r.a.createElement("div",{className:"settings-header"},r.a.createElement(D,{to:"/settings"}),r.a.createElement("h1",null,"Update Email")),r.a.createElement(F,null)),r.a.createElement(i.b,{exact:!0,path:"/settings/logoutall"},r.a.createElement("div",{className:"settings-header"},r.a.createElement(D,{to:"/settings"}),r.a.createElement("h1",null,"Logout All Devices")),r.a.createElement(I,null)),r.a.createElement(i.b,{exact:!0,path:"/settings/delete/profile"},r.a.createElement("div",{className:"settings-header"},r.a.createElement(D,{to:"/settings"}),r.a.createElement("h1",null,"Delete Acccount")),r.a.createElement(z,null)),r.a.createElement(i.b,null,r.a.createElement("h1",{className:"centered"},"Not Found"))))},U=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],c=t[1],o={isAuthenticated:a,setIsAuthenticated:c};return Object(n.useEffect)((function(){var e=localStorage.getItem("accessToken");c(!!e)}),[a]),r.a.createElement(m.Provider,{value:o},r.a.createElement(s.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/"},r.a.createElement(y,null)),r.a.createElement(i.b,{path:"/auth"},r.a.createElement(f,null),r.a.createElement(T,null)),r.a.createElement(d,{path:"/home"},r.a.createElement(f,null),r.a.createElement(j,null)),r.a.createElement(d,{path:"/profiles"},r.a.createElement(f,null),r.a.createElement(A,null)),r.a.createElement(d,{path:"/settings"},r.a.createElement(f,null),r.a.createElement(L,null)),r.a.createElement(i.b,null,r.a.createElement("h1",{className:"centered"},"Not Found")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.2aab8f34.chunk.js.map