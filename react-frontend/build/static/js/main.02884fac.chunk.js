(this["webpackJsonpreact-frontend"]=this["webpackJsonpreact-frontend"]||[]).push([[0],{18:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(19),i=n.n(a),r=(n(25),n(2)),o=n(3),l=n(4),j=(n(26),n(27),n(28),s.a.createContext({isAuthenticated:!1,setIsAuthenticated:function(){},CSRF:null})),d=n(10),u=n(12),b=n(0),h=function(e){var t=e.children,n=Object(u.a)(e,["children"]),s=Object(c.useContext)(j).isAuthenticated;return Object(b.jsx)(l.b,Object(d.a)(Object(d.a)({},n),{},{render:function(e){var n=e.location;return s?t:Object(b.jsx)(l.a,{to:{pathname:"/auth/login",state:{from:n}}})}}))},m=function(e){var t=e.children,n=Object(u.a)(e,["children"]),s=Object(c.useContext)(j).isAuthenticated;return Object(b.jsx)(l.b,Object(d.a)(Object(d.a)({},n),{},{render:function(e){var n=e.location;return s?Object(b.jsx)(l.a,{to:{pathname:"/home",state:{from:n}}}):t}}))},O=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),c=0;c<n.length;c++){var s=n[c].trim();if(s.substring(0,e.length+1)===e+"="){t=decodeURIComponent(s.substring(e.length+1));break}}return t},f=(n(35),n(18),function(){return Object(b.jsxs)("svg",{id:"sad",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[Object(b.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(b.jsx)("circle",{cx:"15.5",cy:"9.5",r:"1.5"}),Object(b.jsx)("circle",{cx:"8.5",cy:"9.5",r:"1.5"}),Object(b.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm0-6c-2.33 0-4.32 1.45-5.12 3.5h1.67c.69-1.19 1.97-2 3.45-2s2.75.81 3.45 2h1.67c-.8-2.05-2.79-3.5-5.12-3.5z"})]})}),p=function(e){return Object(b.jsxs)("main",{id:"page-not-found",children:[Object(b.jsx)("h1",{className:"centered",children:"Sorry, the page You are looking for can not be found"}),Object(b.jsx)(f,{}),Object(b.jsx)(o.b,{to:e.to,children:Object(b.jsx)("h2",{className:"centered prim-btn-2",children:"Go back to ".concat(e.name)})})]})},x=function(){var e=Object(c.useContext)(j),t=e.setIsAuthenticated,n=e.CSRF,s=Object(l.g)();return Object(b.jsx)("h3",{onClick:function(){fetch("/api/auth/logout/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":n},credentials:"same-origin"}).then((function(e){200===e.status&&(t(!1),s.push("/"))})).catch((function(e){return alert(e)}))},className:"nav-btn cursor clicked",children:"Logout"})},w=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],s=t[1],a=Object(c.useContext)(j).isAuthenticated,i=Object(c.useState)(!1),l=Object(r.a)(i,2),d=l[0],u=l[1];return Object(c.useEffect)((function(){if(u(a),d){fetch("/api/profiles/current/user/",{method:"GET",headers:{accepts:"application/json"},credentials:"same-origin"}).then((function(e){if(200===e.status)return e.json();throw new Error(e.statusText)})).then((function(e){s(e.username)})).catch((function(e){return console.log(e)}))}}),[a,d]),Object(b.jsx)("header",{id:"main-header",children:Object(b.jsxs)("div",{className:"container flexed",children:[Object(b.jsx)(o.b,{to:"/",children:Object(b.jsx)("h1",{children:"TwitterClone"})}),Object(b.jsxs)("nav",{className:"nav-bar flexed",children:[a&&Object(b.jsx)(o.c,{to:"/home",activeClassName:"active",children:Object(b.jsx)("h3",{className:"nav-btn",children:"Home"})}),a&&Object(b.jsx)(o.c,{to:"/profiles/".concat(n),activeClassName:"active",children:Object(b.jsx)("h3",{className:"nav-btn",children:"Profile"})}),a&&Object(b.jsx)(o.c,{to:"/profiles/search",activeClassName:"active",children:Object(b.jsx)("h3",{className:"nav-btn",children:"Search"})}),!a&&Object(b.jsx)(o.c,{to:"/auth/login",activeClassName:"active",children:Object(b.jsx)("h3",{className:"nav-btn",children:"Login"})}),!a&&Object(b.jsx)(o.c,{to:"/auth/register",activeClassName:"active",children:Object(b.jsx)("h3",{className:"nav-btn",children:"Register"})}),a&&Object(b.jsx)(x,{})]})]})})},g=(n(36),function(){var e=Object(c.useContext)(j),t=e.setIsAuthenticated,n=e.CSRF,s=Object(c.useState)(""),a=Object(r.a)(s,2),i=a[0],o=a[1],d=Object(c.useState)(""),u=Object(r.a)(d,2),h=u[0],m=u[1],O=Object(l.g)(),f=function(e){e.preventDefault();var c={username:i,password:h},s={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":n},credentials:"same-origin",body:JSON.stringify(c)};fetch("/api/auth/login/",s).then((function(e){if(o(""),m(""),200===e.status)return e.json();throw new Error("Try again")})).then((function(e){t(!0),O.push("/home")})).catch((function(e){return alert(e)}))};return Object(b.jsxs)("form",{onSubmit:function(e){return f(e)},action:"",method:"POST",className:"form-container",children:[Object(b.jsx)("div",{className:"form-item",children:Object(b.jsx)("h1",{className:"main-color",children:"Log In"})}),Object(b.jsxs)("div",{className:"form-item",children:[Object(b.jsx)("label",{htmlFor:"id_username",children:"Username"}),Object(b.jsx)("input",{type:"text",name:"username",id:"id_username",value:i,onChange:function(e){return o(e.target.value)},required:!0,autoComplete:"off"})]}),Object(b.jsxs)("div",{className:"form-item",children:[Object(b.jsx)("label",{htmlFor:"id_password",children:"Password"}),Object(b.jsx)("input",{type:"password",name:"password",id:"id_password",value:h,onChange:function(e){return m(e.target.value)},required:!0})]}),Object(b.jsx)("div",{className:"form-item",children:Object(b.jsx)("input",{type:"submit",value:"Log In",className:"prim-btn cursor"})})]})}),v=function(){var e=Object(c.useContext)(j).CSRF,t=Object(c.useState)(""),n=Object(r.a)(t,2),s=n[0],a=n[1],i=Object(c.useState)(""),d=Object(r.a)(i,2),u=d[0],h=d[1],m=Object(c.useState)(""),O=Object(r.a)(m,2),f=O[0],p=O[1],x=Object(c.useState)(""),w=Object(r.a)(x,2),g=w[0],v=w[1],N=Object(c.useState)(""),S=Object(r.a)(N,2),C=S[0],y=S[1],T=Object(l.g)(),_=function(t){t.preventDefault();var n={username:s,name:u,password:f,password2:g,email:C},c={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":e},body:JSON.stringify(n)};fetch("/api/auth/register/",c).then((function(e){if(a(""),h(""),p(""),v(""),y(""),201!==e.status)return e.json();T.push("/auth/login")})).then((function(e){if(e)throw new Error(e[Object.keys(e)[0]])})).catch((function(e){return console.log(e)}))};return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsxs)("form",{onSubmit:function(e){return _(e)},method:"POST",className:"form-container",children:[Object(b.jsx)("div",{className:"form-item",children:Object(b.jsx)("h1",{className:"main-color",children:"Register"})}),Object(b.jsxs)("div",{className:"form-item",children:[Object(b.jsx)("label",{htmlFor:"id_username",children:"Username"}),Object(b.jsx)("input",{type:"text",name:"username",id:"id_username",value:s,onChange:function(e){return a(e.target.value)},autoComplete:"off"})]}),Object(b.jsxs)("div",{className:"form-item",children:[Object(b.jsx)("label",{htmlFor:"id_name",children:"Name"}),Object(b.jsx)("input",{type:"text",name:"name",id:"id_name",value:u,onChange:function(e){return h(e.target.value)},autoComplete:"off"})]}),Object(b.jsxs)("div",{className:"form-item",children:[Object(b.jsx)("label",{htmlFor:"id_password",children:"Password"}),Object(b.jsx)("input",{type:"password",name:"password",id:"id_password",value:f,onChange:function(e){return p(e.target.value)}})]}),Object(b.jsxs)("div",{className:"form-item",children:[Object(b.jsx)("label",{htmlFor:"id_password2",children:"Confirm Password"}),Object(b.jsx)("input",{type:"password",name:"password2",id:"id_password2",value:g,onChange:function(e){return v(e.target.value)}})]}),Object(b.jsxs)("div",{className:"form-item",children:[Object(b.jsx)("label",{htmlFor:"id_email",children:"Email"}),Object(b.jsx)("input",{type:"email",name:"email",id:"id_email",value:C,onChange:function(e){return y(e.target.value)},autoComplete:"off"})]}),Object(b.jsx)("div",{className:"form-item",children:Object(b.jsx)("input",{type:"submit",value:"Register",className:"prim-btn cursor text-color"})})]}),Object(b.jsx)("div",{className:"centered",children:Object(b.jsxs)("p",{children:["Already a user? ",Object(b.jsx)(o.b,{to:"/auth/login",className:"main-color",children:"Login"})]})})]})},N=function(){return Object(b.jsx)("main",{id:"page-container",children:Object(b.jsxs)(l.d,{children:[Object(b.jsx)(m,{exact:!0,path:"/auth/login",children:Object(b.jsx)(g,{})}),Object(b.jsx)(m,{exact:!0,path:"/auth/register",children:Object(b.jsx)(v,{})}),Object(b.jsx)(l.b,{children:Object(b.jsx)(p,{name:"Landing Page",to:"/"})})]})})},S=function(){return Object(b.jsx)("main",{id:"welcome",children:Object(b.jsx)("div",{id:"join-us",children:Object(b.jsx)(o.b,{to:"/auth/register",children:Object(b.jsx)("h1",{children:"Join Us"})})})})},C=(n(37),function(e){var t=Object(c.useContext)(j).CSRF,n=Object(c.useState)(""),s=Object(r.a)(n,2),a=s[0],i=s[1],o=Object(c.useRef)(null),l=Object(c.useRef)(null);Object(c.useEffect)((function(){a.length>240?(o.current.disabled=!0,l.current.style.color="red"):(o.current.disabled=!1,l.current.style.color="inherit")}),[a]);return Object(b.jsxs)("form",{onSubmit:function(n){return function(n){n.preventDefault();var c={content:a},s={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":t},credentials:"same-origin",body:JSON.stringify(c)};fetch("/api/tweets/create/",s).then((function(t){201===t.status&&(i(""),e.onTweetAdd()),t.status})).catch((function(e){console.log(e)}))}(n)},method:"POST",id:"tweet-create-form",className:"form-container",children:[Object(b.jsx)("div",{className:"form-item",children:Object(b.jsx)("textarea",{name:"content",id:"id_content",cols:"60",rows:"10",placeholder:"Your tweet...",required:!0,value:a,onChange:function(e){i(e.target.value)},autoComplete:"off"})}),Object(b.jsx)("div",{className:"form-item",children:Object(b.jsxs)("h6",{ref:l,children:[a.length," / 240"]})}),Object(b.jsx)("div",{className:"form-item",children:Object(b.jsx)("button",{ref:o,type:"submit",className:"prim-btn cursor",children:"Tweet"})})]})}),y=function(e){var t=Object(c.useContext)(j).CSRF,n=Object(c.useState)(e.tweetLikes),s=Object(r.a)(n,2),a=s[0],i=s[1],o=Object(c.useState)(e.isLiked),l=Object(r.a)(o,2),d=l[0],u=l[1],h=Object(c.useState)(!0),m=Object(r.a)(h,2),O=m[0],f=m[1],p=function(e){f(!1);var n="/api/tweets/".concat(e,"/like/");fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":t},credentials:"same-origin"}).then((function(e){if(200!==e.status)throw new Error("Something Wrong Happend!");u(!d),i(d?a-1:a+1),f(!0)})).catch((function(e){alert(e)}))};return Object(b.jsxs)("button",{onDoubleClick:function(){return p(e.tweetId)},onClick:function(){return p(e.tweetId)},className:"prim-btn tweet-container-item cursor",children:[!O&&Object(b.jsx)("div",{className:"btn-loader prim-btn"}),O&&!d&&a+" likes",O&&d&&a+" liked"]})},T=function(e){return Object(b.jsx)(o.b,{to:{pathname:"/home/retweet",state:{tweet:e.tweet}},children:Object(b.jsx)("button",{className:"prim-btn tweet-container-item cursor",children:"retweet"})})},_=function(e){return Object(b.jsxs)("article",{className:"retweet-container",children:[Object(b.jsxs)("header",{className:"tweet-header",children:[Object(b.jsx)("div",{id:"tweet-profile-pic",children:Object(b.jsx)("img",{src:"".concat(e.tweet.profile_pic),alt:""})}),Object(b.jsx)(o.b,{to:"/profiles/".concat(e.tweet.username),children:Object(b.jsx)("h3",{className:"tweet-container-item",children:e.tweet.username})})]}),Object(b.jsx)("p",{className:"tweet-container-item",children:e.tweet.content})]},e.tweet.id)},F=function(e){return Object(b.jsxs)("article",{className:"tweet-container",children:[Object(b.jsxs)("header",{className:"tweet-header",children:[Object(b.jsx)("div",{id:"tweet-profile-pic",children:Object(b.jsx)("img",{src:"".concat(e.tweet.profile_pic),alt:""})}),Object(b.jsx)(o.b,{to:"/profiles/".concat(e.tweet.username),children:Object(b.jsx)("h3",{className:"tweet-container-item",children:e.tweet.username})})]}),Object(b.jsx)("p",{className:"tweet-container-item",children:e.tweet.content}),e.tweet.is_retweet&&Object(b.jsx)(_,{tweet:e.tweet.retweet}),Object(b.jsx)(y,{tweetId:e.tweet.id,tweetLikes:e.tweet.likes,isLiked:e.tweet.isLiked}),Object(b.jsx)(T,{tweet:e.tweet,onTweetAdd:e.onTweetAdd})]},e.tweet.id)},k=function(e){var t=Object(c.useContext)(j).CSRF,n=Object(l.h)(),s=Object(l.g)(),a=Object(c.useState)(""),i=Object(r.a)(a,2),o=i[0],d=i[1];return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsxs)("form",{onSubmit:function(c){return function(c){c.preventDefault();var a="/api/tweets/".concat(n.state.tweet.id,"/retweet/"),i={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":t},credentials:"same-origin",body:JSON.stringify({content:o})};fetch(a,i).then((function(t){if(201===t.status)return s.push("/home"),void e.onTweetAdd();throw new Error("Something wrong happend!")})).catch((function(e){return console.log(e)}))}(c)},method:"POST",id:"tweet-create-form",className:"form-container",children:[Object(b.jsx)("div",{className:"form-item",children:Object(b.jsx)("textarea",{name:"content",id:"id_content",cols:"50",rows:"7",placeholder:"Add a comment",required:!0,value:o,onChange:function(e){return d(e.target.value)},autoComplete:"off"})}),Object(b.jsx)("div",{className:"form-item",children:Object(b.jsx)("button",{type:"submit",className:"prim-btn cursor",children:"Retweet"})})]}),Object(b.jsx)(_,{tweet:n.state.tweet})]})},A=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(!1),i=Object(r.a)(a,2),o=i[0],j=i[1],d=Object(c.useState)(!1),u=Object(r.a)(d,2),h=u[0],m=u[1],O=Object(c.useState)(!1),f=Object(r.a)(O,2),x=f[0],w=f[1];Object(c.useEffect)((function(){fetch("/api/tweets/",{method:"GET",headers:{Accept:"application/json"},credentials:"same-origin"}).then((function(e){if(200===e.status)return e.json();throw new Error(e.statusText)})).then((function(e){m(!0),s(e)})).catch((function(e){m(!0),j(!0),console.log(e)}))}),[x]);var g=function(){w(!x)};return Object(b.jsx)("main",{id:"page-container",children:Object(b.jsxs)(l.d,{children:[Object(b.jsxs)(l.b,{exact:!0,path:"/home",children:[Object(b.jsx)(C,{onTweetAdd:g}),!h&&Object(b.jsx)("div",{className:"loader"}),o&&Object(b.jsx)("h1",{className:"message",children:"Error"}),!o&&h&&Object(b.jsx)("section",{id:"tweets-container",children:n.map((function(e){return Object(b.jsx)(F,{tweet:e,onTweetAdd:g},e.id)}))})]}),Object(b.jsx)(l.b,{exact:!0,path:"/home/retweet",children:Object(b.jsx)(k,{onTweetAdd:g})}),Object(b.jsx)(l.b,{children:Object(b.jsx)(p,{name:"home",to:"/home"})})]})})},P=(n(38),function(e){var t=Object(c.useContext)(j).CSRF,n=Object(c.useState)(!1),s=Object(r.a)(n,2),a=s[0],i=s[1];Object(c.useEffect)((function(){i(e.isFollowed)}),[e.isFollowed]);var o=function(){var n="/api/profiles/".concat(e.username,"/follow/");fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":t},credentials:"same-origin"}).then((function(t){if(200===t.status)return e.onFollowersChange(),t.json();throw new Error})).then((function(e){"followed"===e.message&&i(!0),"unfollowed"===e.message&&i(!1)})).catch((function(e){return console.log(e)}))};return Object(b.jsxs)(c.Fragment,{children:[a&&Object(b.jsx)("h3",{onClick:o,className:"prim-btn-2 cursor",children:"Unfollow"}),!a&&Object(b.jsx)("h3",{onClick:o,className:"prim-btn-2 cursor",children:"Follow"})]})}),E=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)({}),i=Object(r.a)(a,2),j=i[0],d=i[1],u=Object(c.useState)({}),h=Object(r.a)(u,2),m=h[0],O=h[1],f=Object(c.useState)([]),p=Object(r.a)(f,2),x=p[0],w=p[1],g=Object(c.useState)(!1),v=Object(r.a)(g,2),N=v[0],S=v[1],C=Object(c.useState)(!1),y=Object(r.a)(C,2),T=y[0],_=y[1],k=Object(c.useState)(!1),A=Object(r.a)(k,2),E=A[0],R=A[1],U=Object(l.i)().username;Object(c.useEffect)((function(){var e="/api/profiles/".concat(U,"/");fetch(e,{method:"GET",headers:{Accept:"application/json"},credentials:"same-origin"}).then((function(e){if(200===e.status)return e.json();if(404===e.status)throw s(!1),new Error("User not found")})).then((function(e){_(!0),s(!0),S(!1),d(e.user_data),O(e.profile_data),w(e.tweets_data)})).catch((function(e){_(!0),S(!0),console.log(e)}))}),[U,E]);return Object(b.jsxs)(c.Fragment,{children:[!T&&Object(b.jsx)("div",{className:"loader"}),T&&!n&&Object(b.jsx)("h1",{className:"centered",children:"User Not Found"}),N&&n&&Object(b.jsx)("h1",{className:"message",children:"Something wrog happend!"}),!N&&T&&Object(b.jsxs)(c.Fragment,{children:[Object(b.jsxs)("section",{id:"profile-info",children:[Object(b.jsxs)("header",{id:"profile-header",className:"flexed",children:[Object(b.jsx)("div",{id:"profile-pic",children:Object(b.jsx)("img",{src:"".concat(m.profile_pic),alt:"Not Found"})}),Object(b.jsxs)("h1",{children:[m.tweets_count," Tweets"]}),j.is_current_user&&Object(b.jsx)(o.b,{to:"/settings",children:Object(b.jsx)("h3",{className:"prim-btn-2",children:"Edit Profile"})}),!j.is_current_user&&Object(b.jsx)(P,{isFollowed:j.is_followed,username:j.username,onFollowersChange:function(){R(!E)}})]}),Object(b.jsx)("h1",{className:"bolder",children:m.name}),Object(b.jsxs)("p",{className:"light-text-color",children:["@",j.username]}),Object(b.jsx)("p",{children:m.bio}),Object(b.jsxs)("p",{className:"light-text-color ",children:["Joined ",j.date_joined]}),m.birthday&&Object(b.jsxs)("p",{className:"light-text-color ",children:["Born ",m.birthday]}),Object(b.jsxs)("p",{className:"light-text-color",children:[Object(b.jsxs)("span",{className:"bold",children:[" ",m.following_count," "]}),Object(b.jsx)(o.b,{to:"/profiles/".concat(j.username,"/following"),children:"Following"}),Object(b.jsxs)("span",{className:"bold",children:[" ",m.followers_count," "]}),Object(b.jsx)(o.b,{to:"/profiles/".concat(j.username,"/followers"),children:"Followers"})]})]}),Object(b.jsx)("section",{id:"tweets-container",children:x.map((function(e){return Object(b.jsx)(F,{tweet:e},e.id)}))})]})]})},R=function(){var e=Object(c.useContext)(j).CSRF,t=Object(c.useState)([]),n=Object(r.a)(t,2),s=n[0],a=n[1],i=Object(c.useState)(""),l=Object(r.a)(i,2),d=l[0],u=l[1];return Object(c.useEffect)((function(){var t={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":e},credentials:"same-origin",body:JSON.stringify({username:d})};fetch("/api/profiles/",t).then((function(e){if(200===e.status)return e.json();throw new Error})).then((function(e){a(e||[])})).catch((function(e){return console.log(e)}))}),[d,e]),Object(b.jsxs)(c.Fragment,{children:[Object(b.jsxs)("header",{className:"form-container",children:[Object(b.jsx)("div",{className:"form-item",children:Object(b.jsx)("h1",{className:"main-color",children:"Search Users"})}),Object(b.jsxs)("div",{className:"form-item",children:[Object(b.jsx)("label",{htmlFor:"id_username",children:"Username"}),Object(b.jsx)("input",{type:"text",name:"username",id:"id_username",required:!0,autoComplete:"off",onChange:function(e){u(e.target.value)}})]}),Object(b.jsx)("div",{})]}),Object(b.jsx)("section",{id:"users-list",children:s.map((function(e){return Object(b.jsx)(o.b,{to:"/profiles/".concat(e.username),children:Object(b.jsx)("h2",{children:e.username})},e.id)}))})]})},U=function(e){var t=Object(c.useState)([]),n=Object(r.a)(t,2),s=n[0],a=n[1],i=Object(c.useState)(!1),j=Object(r.a)(i,2),d=j[0],u=j[1],h=Object(c.useState)(!1),m=Object(r.a)(h,2),O=m[0],f=m[1],p=Object(l.i)().username;return Object(c.useEffect)((function(){var t="/api/profiles/".concat(p,"/").concat(e.followType,"/");fetch(t,{method:"GET",headers:{Accept:"application/json"},credentials:"same-origin"}).then((function(e){if(200===e.status)return e.json()})).then((function(e){f(!0),a(e.follow_list)})).catch((function(e){f(!0),u(!0)}))}),[p,e.followType]),Object(b.jsxs)(c.Fragment,{children:[!O&&Object(b.jsx)("div",{className:"loader"}),d&&Object(b.jsx)("h1",{className:"message",children:"Something wrog happend!"}),!d&&O&&Object(b.jsx)("section",{id:"users-list",children:s.map((function(e){return Object(b.jsx)(o.b,{to:"/profiles/".concat(e),children:Object(b.jsx)("h2",{children:e})},e)}))})]})},L=function(){return Object(b.jsx)("main",{id:"page-container",children:Object(b.jsxs)(l.d,{children:[Object(b.jsx)(l.b,{exact:!0,path:"/profiles/search",children:Object(b.jsx)(R,{})}),Object(b.jsx)(l.b,{exact:!0,path:"/profiles/:username",children:Object(b.jsx)(E,{})}),Object(b.jsx)(l.b,{exact:!0,path:"/profiles/:username/following",children:Object(b.jsx)(U,{followType:"following"})}),Object(b.jsx)(l.b,{exact:!0,path:"/profiles/:username/followers",children:Object(b.jsx)(U,{followType:"followers"})}),Object(b.jsx)(l.b,{children:Object(b.jsx)(p,{name:"home",to:"/home"})})]})})},D=(n(39),function(){var e=Object(c.useContext)(j).CSRF,t=Object(c.useState)(""),n=Object(r.a)(t,2),s=n[0],a=n[1],i=Object(c.useState)(""),o=Object(r.a)(i,2),l=o[0],d=o[1],u=Object(c.useState)(""),h=Object(r.a)(u,2),m=h[0],O=h[1],f=Object(c.useState)(null),p=Object(r.a)(f,2),x=p[0],w=p[1];Object(c.useEffect)((function(){fetch("/api/settings/update/profile/",{method:"GET",headers:{Accept:"application/json"},credentials:"same-origin"}).then((function(e){if(200===e.status)return e.json()})).then((function(e){a(e.bio||""),d(e.birthday||""),O(e.name),w(null)})).catch((function(e){console.log(e)}))}),[]);return Object(b.jsxs)("form",{onSubmit:function(t){return function(t){t.preventDefault();var n=new FormData;n.append("bio",s),n.append("birthday",l),n.append("name",m),x&&n.append("profile_pic",x,x.name),fetch("/api/settings/update/profile/",{method:"PUT",headers:{Accept:"application/json","X-CSRFToken":e},credentials:"same-origin",body:n}).then((function(e){200===e.status&&alert("updated")})).catch((function(e){console.log(e)}))}(t)},className:"form-container",method:"put",encType:"multipart/form-data",children:[Object(b.jsxs)("div",{className:"form-item",children:[Object(b.jsx)("label",{htmlFor:"id_name",children:"Name"}),Object(b.jsx)("input",{type:"text",name:"name",id:"id_name",value:m,onChange:function(e){return O(e.target.value)},autoComplete:"off"})]}),Object(b.jsxs)("div",{className:"form-item",children:[Object(b.jsx)("label",{htmlFor:"id_bio",children:"Bio"}),Object(b.jsx)("input",{type:"text",name:"bio",id:"id_bio",value:s,onChange:function(e){return a(e.target.value)},autoComplete:"off"})]}),Object(b.jsxs)("div",{className:"form-item",children:[Object(b.jsx)("label",{htmlFor:"",children:"Birthday"}),Object(b.jsx)("input",{type:"date",name:"birthday",id:"id_birthday",value:l,onChange:function(e){return d(e.target.value)}})]}),Object(b.jsxs)("div",{className:"form-item",children:[Object(b.jsx)("label",{htmlFor:"id_image",children:"Profile Picture:"}),Object(b.jsxs)("div",{className:"fileUpload prim-btn-2",children:[Object(b.jsx)("span",{children:"Upload"}),Object(b.jsx)("input",{type:"file",name:"profile_pic",id:"id_profile_pic",className:"upload",accept:"image/*",onChange:function(e){return w(e.target.files[0])}})]})]}),Object(b.jsx)("div",{className:"form-item",children:Object(b.jsx)("input",{type:"submit",value:"Update",className:"prim-btn cursor text-color"})})]})}),I=function(){var e=Object(c.useContext)(j).CSRF,t=Object(c.useState)(""),n=Object(r.a)(t,2),s=n[0],a=n[1],i=Object(c.useState)(""),o=Object(r.a)(i,2),l=o[0],d=o[1],u=Object(c.useState)(""),h=Object(r.a)(u,2),m=h[0],O=h[1],f=function(t){t.preventDefault();var n={old_password:s,new_password:l,new_password2:m},c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":e},credentials:"same-origin",body:JSON.stringify(n)};fetch("/api/settings/update/password/",c).then((function(e){if(a(""),d(""),O(""),[200,400,401].includes(e.status))return e.json()})).then((function(e){e.success&&alert(e.success),e.failure&&alert(e.failure)})).catch((function(e){console.log(e)}))};return Object(b.jsxs)("form",{onSubmit:function(e){return f(e)},action:"POST",className:"form-container",children:[Object(b.jsxs)("div",{className:"form-item",children:[Object(b.jsx)("label",{htmlFor:"id_old_password",children:"Old Password"}),Object(b.jsx)("input",{type:"password",name:"old_password",id:"id_old_password",value:s,onChange:function(e){return a(e.target.value)},required:!0})]}),Object(b.jsxs)("div",{className:"form-item",children:[Object(b.jsx)("label",{htmlFor:"id_old_password",children:"New Password"}),Object(b.jsx)("input",{type:"password",name:"new_password",id:"id_new_password",value:l,onChange:function(e){return d(e.target.value)},required:!0})]}),Object(b.jsxs)("div",{className:"form-item",children:[Object(b.jsx)("label",{htmlFor:"id_old_password",children:"Confirm New Password"}),Object(b.jsx)("input",{type:"password",name:"new_password2",id:"id_new_password2",value:m,onChange:function(e){return O(e.target.value)},required:!0})]}),Object(b.jsx)("div",{className:"form-item",children:Object(b.jsx)("input",{type:"submit",value:"Update",className:"prim-btn cursor text-color"})})]})},J=function(){var e=Object(c.useContext)(j).CSRF,t=Object(c.useState)(""),n=Object(r.a)(t,2),s=n[0],a=n[1],i=Object(c.useState)(""),o=Object(r.a)(i,2),l=o[0],d=o[1],u=function(t){t.preventDefault();var n={password:s,email:l},c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":e},credentials:"same-origin",body:JSON.stringify(n)};fetch("/api/settings/update/email/",c).then((function(e){if(a(""),d(""),[200,400].includes(e.status))return e.json()})).then((function(e){e.success&&alert(e.success),e.failure&&alert(e.failure)})).catch((function(e){console.log(e)}))};return Object(b.jsxs)("form",{onSubmit:function(e){return u(e)},action:"POST",className:"form-container",children:[Object(b.jsxs)("div",{className:"form-item",children:[Object(b.jsx)("label",{htmlFor:"id_password",children:"Confirm Password"}),Object(b.jsx)("input",{type:"password",name:"password",id:"id_password",value:s,onChange:function(e){return a(e.target.value)},required:!0})]}),Object(b.jsxs)("div",{className:"form-item",children:[Object(b.jsx)("label",{htmlFor:"id_email",children:"New Email"}),Object(b.jsx)("input",{type:"email",name:"email",id:"id_email",value:l,onChange:function(e){return d(e.target.value)},required:!0,autoComplete:"off"})]}),Object(b.jsx)("div",{className:"form-item",children:Object(b.jsx)("input",{type:"submit",value:"Update",className:"prim-btn cursor text-color"})})]})},X=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],s=t[1],a=Object(c.useContext)(j),i=a.setIsAuthenticated,o=a.CSRF,d=Object(l.g)();return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault();var t={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":o},credentials:"same-origin",body:JSON.stringify({password:n})};fetch("/api/auth/confirmpassword/",t).then((function(e){if(s(""),[200,401,400].includes(e.status))return e.json();throw new Error})).then((function(e){e.message&&alert(e.message),e.success&&(document.getElementById("confirm-delete").style.display="block")})).catch((function(e){return console.log(e)}))}(e)},action:"POST",className:"form-container",children:[Object(b.jsxs)("div",{className:"form-item",children:[Object(b.jsx)("label",{htmlFor:"id_password",children:"Confirm Password To Delete Account"}),Object(b.jsx)("input",{type:"password",name:"password",id:"id_password",value:n,onChange:function(e){return s(e.target.value)},required:!0})]}),Object(b.jsx)("div",{className:"form-item",children:Object(b.jsx)("input",{type:"submit",value:"Confirm",className:"prim-btn cursor text-color"})})]}),Object(b.jsx)("h2",{id:"confirm-delete",className:"centered cursor",onClick:function(e){return function(e){var t={method:"POST",headers:{Authorization:"Token ".concat(localStorage.getItem("accessToken")),Accept:"application/json","Content-Type":"application/json"}};fetch("/api/settings/delete/profile/",t).then((function(e){200===e.status&&(i(!1),d.push("/"))})).catch((function(e){return console.log(e)}))}()},children:"Delete Account"})]})},q=function(e){return Object(b.jsx)(o.b,{to:e.to,children:Object(b.jsx)("div",{id:"back",children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(b.jsx)("path",{d:"M20 11H6.83l2.88-2.88c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0L3.71 11.3c-.39.39-.39 1.02 0 1.41L8.3 17.3c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L6.83 13H20c.55 0 1-.45 1-1s-.45-1-1-1z"})})})})},B=function(){return Object(b.jsx)("main",{id:"page-container",className:"container",children:Object(b.jsxs)(l.d,{children:[Object(b.jsx)(l.b,{exact:!0,path:"/settings",children:Object(b.jsxs)("header",{id:"settings-list",children:[Object(b.jsx)(o.b,{to:"/settings/profile",children:Object(b.jsx)("h2",{children:"Profile"})}),Object(b.jsx)(o.b,{to:"/settings/password",children:Object(b.jsx)("h2",{children:"Password"})}),Object(b.jsx)(o.b,{to:"/settings/email",children:Object(b.jsx)("h2",{children:"Email"})}),Object(b.jsx)(o.b,{to:"/settings/delete/profile",children:Object(b.jsx)("h2",{children:"Delete Account"})})]})}),Object(b.jsxs)(l.b,{exact:!0,path:"/settings/profile",children:[Object(b.jsxs)("div",{className:"settings-header",children:[Object(b.jsx)(q,{to:"/settings"}),Object(b.jsx)("h1",{children:"Update Profile"})]}),Object(b.jsx)(D,{})]}),Object(b.jsxs)(l.b,{exact:!0,path:"/settings/password",children:[Object(b.jsxs)("div",{className:"settings-header",children:[Object(b.jsx)(q,{to:"/settings"}),Object(b.jsx)("h1",{children:"Update Password"})]}),Object(b.jsx)(I,{})]}),Object(b.jsxs)(l.b,{exact:!0,path:"/settings/email",children:[Object(b.jsxs)("div",{className:"settings-header",children:[Object(b.jsx)(q,{to:"/settings"}),Object(b.jsx)("h1",{children:"Update Email"})]}),Object(b.jsx)(J,{})]}),Object(b.jsxs)(l.b,{exact:!0,path:"/settings/delete/profile",children:[Object(b.jsxs)("div",{className:"settings-header",children:[Object(b.jsx)(q,{to:"/settings"}),Object(b.jsx)("h1",{children:"Delete Acccount"})]}),Object(b.jsx)(X,{})]}),Object(b.jsx)(l.b,{children:Object(b.jsx)(p,{name:"settings",to:"/settings"})})]})})},G=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(null),i=Object(r.a)(a,2),d=i[0],u=i[1],m=Object(c.useState)(!1),f=Object(r.a)(m,2),x=f[0],g=f[1];return Object(c.useEffect)((function(){fetch("/api/auth/authenticated/",{method:"GET",headers:{Accept:"application/json"}}).then((function(e){200===e.status&&(s(!0),u(O("csrftoken"))),g(!0)}))}),[d,n]),Object(b.jsxs)(c.Fragment,{children:[!x&&Object(b.jsx)("div",{className:"loader"}),x&&Object(b.jsx)(j.Provider,{value:{isAuthenticated:n,setIsAuthenticated:s,CSRF:d},children:Object(b.jsx)(o.a,{children:Object(b.jsxs)(l.d,{children:[Object(b.jsx)(l.b,{exact:!0,path:"/",children:Object(b.jsx)(S,{})}),Object(b.jsxs)(l.b,{path:"/auth",children:[Object(b.jsx)(w,{}),Object(b.jsx)(N,{})]}),Object(b.jsxs)(h,{path:"/home",children:[Object(b.jsx)(w,{}),Object(b.jsx)(A,{})]}),Object(b.jsxs)(h,{path:"/profiles",children:[Object(b.jsx)(w,{}),Object(b.jsx)(L,{})]}),Object(b.jsxs)(h,{path:"/settings",children:[Object(b.jsx)(w,{}),Object(b.jsx)(B,{})]}),Object(b.jsx)(l.b,{children:Object(b.jsx)(p,{name:"Landing Page",to:"/"})})]})})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(G,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.02884fac.chunk.js.map