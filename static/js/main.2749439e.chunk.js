(this["webpackJsonpreact-frontend"]=this["webpackJsonpreact-frontend"]||[]).push([[0],[,,,,function(e,t,n){e.exports=n(13)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(3),o=n.n(c),i=(n(9),n(10),n(11),function(){return r.a.createElement("header",{id:"main-header"},r.a.createElement("div",{className:"container flexed"},r.a.createElement("h1",{className:"cursor clicked"},"TweetMe"),r.a.createElement("nav",{className:"nav-bar flexed"},r.a.createElement("h3",{className:"nav-btn cursor clicked"},"Home"),r.a.createElement("h3",{className:"nav-btn cursor clicked"},"Contact"))))}),s=n(1),l=(n(12),function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var r=n[a].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}),m=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],o=l("csrftoken");return r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault();var t=e.target,n=new URLSearchParams(new FormData(t));fetch("http://127.0.0.1:8000/api/tweets/create/",{method:"POST",headers:{"X-CSRFToken":o},body:n}).then((function(e){if(201===e.status)return e.json();if(400===e.status)throw new Error("Try a shorter tweet");if(403===e.status)throw new Error("Login first to perform this action")})).then((function(){t.reset()}),(function(e){t.reset(),c(!0)}))}(e)},method:"POST",action:"api/tweets/create",id:"tweet-create-form",className:"form-container"},r.a.createElement("input",{type:"hidden",name:"csrfmiddlewaretoken",value:o}),r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"id_content"},"Content: "),r.a.createElement("textarea",{name:"content",id:"id_content",cols:"50",rows:"7",placeholder:"Your tweet...",required:!0})),n&&r.a.createElement("div",{className:"form-item"},"Error"),r.a.createElement("div",{className:"form-item"},r.a.createElement("button",{type:"submit",className:"prim-btn cursor"},"Tweet")))},u=function(e){return r.a.createElement("button",{onClick:function(){return function(e){var t="http://127.0.0.1:8000/api/tweets/".concat(e,"/like/"),n={method:"POST",headers:{"X-CSRFToken":l("csrftoken")}};fetch(t,n).then((function(e){if(200===e.status&&alert("ok"),403===e.status)throw new Error("Login first to perform this action")})).then((function(){}),(function(e){alert(e)}))}(e.tweetId)},className:"prim-btn tweet-container-item cursor"},e.tweetLikes," likes")},f=function(){return r.a.createElement("button",{className:"prim-btn tweet-container-item cursor"},"retweet")},d=function(e){return r.a.createElement("section",{id:"tweets-container"},e.tweets.map((function(e){return r.a.createElement("article",{key:e.id,className:"tweet-container"},r.a.createElement("h3",{className:"tweet-container-item"},e.id," ","->",e.is_retweet&&e.retweet.content,!e.is_retweet&&e.content),r.a.createElement(u,{tweetId:e.id,tweetLikes:e.likes}),r.a.createElement(f,null))})))},h=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),i=Object(s.a)(o,2),l=i[0],u=i[1],f=Object(a.useState)(!1),h=Object(s.a)(f,2),w=h[0],E=h[1];return Object(a.useEffect)((function(){fetch("http://127.0.0.1:8000/api/tweets/",{method:"get",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",Accept:"application/json"}}).then((function(e){if(200===e.status)return e.json()})).then((function(e){E(!0),c(e)}),(function(e){E(!0),u(!0)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(m,null),!w&&r.a.createElement("h1",{className:"message"},"Loading"),l&&r.a.createElement("h1",{className:"message"},"Error"),!l&&r.a.createElement(d,{tweets:n}))};var w=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(i,null),r.a.createElement("main",{id:"page-container"},r.a.createElement(h,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[4,1,2]]]);
//# sourceMappingURL=main.2749439e.chunk.js.map